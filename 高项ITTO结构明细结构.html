<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>高项ITTO结构 - 项目管理知识体系</title>
    
    <!-- CDN引用 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    
    <!-- 内联数据区 -->
    <script>
        // 完整的ITTO数据
        const ittoData = [
            {"knowledge_area": "项目整合管理", "process_group": "启动", "process": "制定项目章程", "inputs": ["立项管理文件", "协议", "事业环境因素", "组织过程资产"], "tools": ["专家判断", "数据收集(头脑风暴、焦点小组、访谈)", "人际关系与团队技能(冲突管理、引导、会议管理)", "会议"], "outputs": ["项目章程", "假设日志"]},
            {"knowledge_area": "项目整合管理", "process_group": "规划", "process": "制定项目管理计划", "inputs": ["项目章程", "其他知识领域规划过程的输出", "事业环境因素", "组织过程资产"], "tools": ["专家判断", "数据收集(头脑风暴、核对单、焦点小组、访谈)", "人际关系与团队技能(冲突管理、引导、会议管理)", "会议"], "outputs": ["项目管理计划(子管理计划、基准、其他组件)"]},
            {"knowledge_area": "项目整合管理", "process_group": "执行", "process": "指导与管理项目工作", "inputs": ["项目管理计划", "批准的变更请求", "事业环境因素", "组织过程资产", "项目文件(变更日志、经验教训登记册、里程碑清单、项目沟通记录、项目进度计划、需求跟踪矩阵、风险登记册、相关方登记册)"], "tools": ["专家判断", "项目管理信息系统", "会议"], "outputs": ["可交付成果", "工作绩效数据", "问题日志", "变更请求", "项目管理计划更新", "项目文件更新(活动清单、假设日志、经验教训登记册、需求文件、风险登记册、相关方登记册)", "组织过程资产更新"]},
            {"knowledge_area": "项目整合管理", "process_group": "执行", "process": "管理项目知识", "inputs": ["项目管理计划", "项目文件(经验教训登记册、项目团队派工单、资源分解结构、资源日历、资源管理计划、相关方登记册)", "可交付成果", "事业环境因素", "组织过程资产"], "tools": ["专家判断", "知识管理", "信息管理", "人际关系与团队技能(积极倾听、引导、领导力、人际交往、政治意识)"], "outputs": ["经验教训登记册", "项目管理计划更新", "组织过程资产更新"]},
            {"knowledge_area": "项目整合管理", "process_group": "监控", "process": "监控项目工作", "inputs": ["项目管理计划", "项目文件(假设日志、估算依据、问题日志、经验教训登记册、里程碑清单、质量报告、风险登记册、风险报告、进度预测、成本预测)", "工作绩效信息", "协议", "事业环境因素", "组织过程资产"], "tools": ["专家判断", "数据分析(备选方案分析、成本效益分析、挣值分析、根本原因分析、趋势分析、偏差分析)", "决策(投票)", "会议"], "outputs": ["工作绩效报告", "变更请求", "项目管理计划更新", "项目文件更新(成本预测、问题日志、经验教训登记册、风险登记册、进度预测)"]},
            {"knowledge_area": "项目整合管理", "process_group": "监控", "process": "实施整体变更控制", "inputs": ["项目管理计划", "变更请求", "工作绩效报告", "项目文件(估算依据、需求跟踪矩阵、风险报告)", "事业环境因素", "组织过程资产"], "tools": ["专家判断", "变更控制工具", "数据分析(备选方案分析、成本效益分析)", "决策(投票、独裁型决策制定、多标准决策分析)", "会议"], "outputs": ["批准的变更请求", "变更日志", "项目管理计划更新", "项目文件更新"]},
            {"knowledge_area": "项目整合管理", "process_group": "收尾", "process": "结束项目或阶段", "inputs": ["项目章程", "项目管理计划", "项目文件(假设日志、估算依据、变更日志、问题日志、经验教训登记册、里程碑清单、质量控制测量结果、质量报告、需求文件、风险登记册、风险报告、进度计划、进度预测、相关方登记册、测试与评估文件)", "验收的可交付成果", "商业文件(商业论证、效益管理计划)", "协议", "采购文档", "组织过程资产"], "tools": ["专家判断", "数据分析(文档分析、回归分析、趋势分析、偏差分析)", "会议"], "outputs": ["项目文件更新", "最终产品、服务或成果移交", "最终报告", "组织过程资产更新(经验教训登记册、项目记录)"]},
            {"knowledge_area": "项目范围管理", "process_group": "规划", "process": "规划范围管理", "inputs": ["项目章程", "项目管理计划(质量管理计划、项目生命周期描述、开发方法)", "事业环境因素", "组织过程资产"], "tools": ["专家判断", "数据分析(备选方案分析)", "会议"], "outputs": ["范围管理计划", "需求管理计划"]},
            {"knowledge_area": "项目范围管理", "process_group": "规划", "process": "收集需求", "inputs": ["项目章程", "项目管理计划(范围管理计划、需求管理计划、相关方参与计划)", "项目文件(假设日志、经验教训登记册、相关方登记册)", "商业文件(商业论证、效益管理计划)", "协议", "事业环境因素", "组织过程资产"], "tools": ["专家判断", "数据收集(头脑风暴、访谈、焦点小组、问卷调查、标杆对照)", "数据分析(文件分析)", "决策(投票、多标准决策分析)", "数据表现(亲和图、思维导图)", "人际关系与团队技能(积极倾听、沟通、引导、访谈)", "系统交互图", "原型法"], "outputs": ["需求文件", "需求跟踪矩阵"]},
            {"knowledge_area": "项目范围管理", "process_group": "规划", "process": "定义范围", "inputs": ["项目章程", "项目管理计划(范围管理计划)", "项目文件(需求文件、需求跟踪矩阵)", "事业环境因素", "组织过程资产"], "tools": ["专家判断", "数据分析(备选方案分析)", "决策(多标准决策分析)", "人际关系与团队技能(引导)", "产品分析"], "outputs": ["项目范围说明书", "项目文件更新(假设日志、需求文件、需求跟踪矩阵)"]},
            {"knowledge_area": "项目范围管理", "process_group": "规划", "process": "创建WBS", "inputs": ["项目管理计划(范围管理计划)", "项目文件(项目范围说明书、需求文件)", "事业环境因素", "组织过程资产"], "tools": ["专家判断", "分解", "滚动式规划"], "outputs": ["范围基准", "项目文件更新(项目范围说明书、需求文件、需求跟踪矩阵)"]},
            {"knowledge_area": "项目范围管理", "process_group": "监控", "process": "确认范围", "inputs": ["项目管理计划(范围管理计划、需求管理计划、范围基准)", "项目文件(需求文件、需求跟踪矩阵)", "核实的可交付成果", "工作绩效数据"], "tools": ["检查", "决策(投票)"], "outputs": ["验收的可交付成果", "变更请求", "工作绩效信息", "项目文件更新(需求文件、需求跟踪矩阵)"]},
            {"knowledge_area": "项目范围管理", "process_group": "监控", "process": "控制范围", "inputs": ["项目管理计划(范围管理计划、需求管理计划、变更管理计划、范围基准、绩效测量基准)", "项目文件(需求文件、需求跟踪矩阵)", "工作绩效数据", "组织过程资产"], "tools": ["数据分析(偏差分析、趋势分析)", "决策(投票)", "人际关系与团队技能(谈判)", "会议"], "outputs": ["工作绩效信息", "变更请求", "项目管理计划更新(范围基准、进度基准、成本基准、绩效测量基准)", "项目文件更新(需求文件、需求跟踪矩阵、经验教训登记册)"]},
            {"knowledge_area": "项目进度管理", "process_group": "规划", "process": "规划进度管理", "inputs": ["项目章程", "项目管理计划（开发方法、范围管理计划）", "事业环境因素", "组织过程资产"], "tools": ["专家判断", "数据分析(备选方案分析)", "会议"], "outputs": ["进度管理计划"]},
            {"knowledge_area": "项目进度管理", "process_group": "规划", "process": "定义活动", "inputs": ["项目管理计划(进度管理计划、范围基准)", "项目文件(里程碑清单、需求文件、风险登记册)"], "tools": ["专家判断", "分解", "滚动式规划", "会议"], "outputs": ["活动清单", "活动属性", "里程碑清单更新"]},
            {"knowledge_area": "项目进度管理", "process_group": "规划", "process": "排列活动顺序", "inputs": ["项目管理计划(进度管理计划)", "项目文件(活动清单、活动属性、里程碑清单、需求文件、风险登记册)"], "tools": ["专家判断", "紧前关系绘图法(PDM)", "确定依赖关系", "提前量和滞后量", "项目管理信息系统"], "outputs": ["项目进度网络图", "项目文件更新(活动属性、活动清单、里程碑清单)"]},
            {"knowledge_area": "项目进度管理", "process_group": "规划", "process": "估算活动持续时间", "inputs": ["项目管理计划(进度管理计划、范围基准)", "项目文件(活动清单、活动属性、里程碑清单、项目团队派工单、资源分解结构、资源日历、资源管理计划、风险登记册)"], "tools": ["专家判断", "类比估算", "参数估算", "三点估算", "自下而上估算", "数据分析(备选方案分析、储备分析)", "决策(投票)", "会议"], "outputs": ["持续时间估算", "估算依据", "项目文件更新(活动属性、假设日志、经验教训登记册)"]},
            {"knowledge_area": "项目进度管理", "process_group": "规划", "process": "制定进度计划", "inputs": ["项目管理计划(进度管理计划、范围基准、资源管理计划、风险管理计划)", "项目文件(活动清单、活动属性、里程碑清单、持续时间估算、估算依据、项目进度网络图、项目团队派工单、资源日历、资源需求、风险登记册)"], "tools": ["专家判断", "进度网络分析", "关键路径法", "资源优化(资源平衡、资源平滑)", "数据分析(假设情景分析、模拟)", "提前量和滞后量", "进度压缩(赶工、快速跟进)", "项目管理信息系统", "敏捷发布规划"], "outputs": ["进度基准", "项目进度计划", "进度数据", "项目日历", "变更请求", "项目管理计划更新(进度管理计划、成本基准)", "项目文件更新(活动属性、假设日志、持续时间估算、估算依据、经验教训登记册、资源需求、风险登记册)"]},
            {"knowledge_area": "项目进度管理", "process_group": "监控", "process": "控制进度", "inputs": ["项目管理计划(进度管理计划、进度基准、范围基准、绩效测量基准)", "项目文件(经验教训登记册、项目日历、项目进度计划、资源日历、进度数据)", "工作绩效数据", "组织过程资产"], "tools": ["数据分析(挣值分析、迭代燃尽图、绩效审查、趋势分析、偏差分析、假设情景分析)", "关键路径法", "项目管理信息系统", "资源优化", "提前量和滞后量", "进度压缩"], "outputs": ["工作绩效信息", "进度预测", "变更请求", "项目管理计划更新(进度管理计划、进度基准、成本基准、绩效测量基准)", "项目文件更新(假设日志、估算依据、经验教训登记册、项目进度计划、资源日历、风险登记册、进度数据)"]},
            {"knowledge_area": "项目成本管理", "process_group": "规划", "process": "规划成本管理", "inputs": ["项目章程", "项目管理计划(进度管理计划、风险管理计划)", "事业环境因素", "组织过程资产"], "tools": ["专家判断", "数据分析(备选方案分析)", "会议"], "outputs": ["成本管理计划"]},
            {"knowledge_area": "项目成本管理", "process_group": "规划", "process": "估算成本", "inputs": ["项目管理计划(成本管理计划、质量管理计划、范围基准、进度基准、资源管理计划、风险管理计划)", "项目文件(活动成本估算、估算依据、活动持续时间估算、活动资源需求、里程碑清单、项目进度计划、资源日历、风险登记册)", "事业环境因素", "组织过程资产"], "tools": ["专家判断", "类比估算", "参数估算", "自下而上估算", "三点估算", "数据分析(备选方案分析、储备分析、质量成本)", "项目管理信息系统", "决策(投票)"], "outputs": ["成本估算", "估算依据", "项目文件更新(假设日志、经验教训登记册、风险登记册)"]},
            {"knowledge_area": "项目成本管理", "process_group": "规划", "process": "制定预算", "inputs": ["项目管理计划(成本管理计划、范围基准、进度基准、资源管理计划)", "项目文件(估算依据、成本估算、项目进度计划、资源日历、风险登记册)", "商业文件(商业论证、效益管理计划)", "协议", "事业环境因素", "组织过程资产"], "tools": ["专家判断", "成本汇总", "数据分析(储备分析、历史信息审核)", "资金限制平衡", "融资", "项目管理信息系统"], "outputs": ["成本基准", "项目资金需求", "项目文件更新(成本估算、经验教训登记册、风险登记册)"]},
            {"knowledge_area": "项目成本管理", "process_group": "监控", "process": "控制成本", "inputs": ["项目管理计划(成本管理计划、成本基准、绩效测量基准)", "项目文件(经验教训登记册、项目资金需求)", "工作绩效数据", "组织过程资产"], "tools": ["专家判断", "数据分析(挣值分析、偏差分析、趋势分析、储备分析)", "完工尚需绩效指数", "项目管理信息系统"], "outputs": ["工作绩效信息", "成本预测", "变更请求", "项目管理计划更新(成本管理计划、成本基准、绩效测量基准)", "项目文件更新(假设日志、估算依据、成本估算、经验教训登记册、风险登记册)"]},
            {"knowledge_area": "项目质量管理", "process_group": "规划", "process": "规划质量管理", "inputs": ["项目章程", "项目管理计划(范围基准、需求管理计划、风险管理计划、相关方参与计划)", "项目文件(需求文件、需求跟踪矩阵、风险登记册、相关方登记册)", "事业环境因素", "组织过程资产"], "tools": ["专家判断", "数据收集(标杆对照)", "数据分析(成本效益分析、质量成本)", "决策(多标准决策分析)", "数据表现(流程图、逻辑数据模型、矩阵图、思维导图)", "测试与检查规划", "会议"], "outputs": ["质量管理计划", "质量测量指标", "项目管理计划更新(风险管理计划)", "项目文件更新(经验教训登记册、需求跟踪矩阵、风险登记册、相关方登记册)"]},
            {"knowledge_area": "项目质量管理", "process_group": "执行", "process": "管理质量", "inputs": ["项目管理计划(质量管理计划)", "项目文件(质量测量指标、风险登记册)", "组织过程资产"], "tools": ["数据收集(核对单)", "数据分析(备选方案分析、文件分析、过程分析、根本原因分析)", "决策(多标准决策分析)", "数据表现(亲和图、因果图、流程图、直方图、矩阵图、散点图、分层)", "审计", "面向X的设计", "问题解决", "质量改进方法"], "outputs": ["质量报告", "测试与评估文件", "变更请求", "项目管理计划更新(质量管理计划、范围基准、进度基准、成本基准)", "项目文件更新(问题日志、经验教训登记册、风险登记册)"]},
            {"knowledge_area": "项目质量管理", "process_group": "监控", "process": "控制质量", "inputs": ["项目管理计划(质量管理计划、范围基准)", "项目文件(质量测量指标、测试与评估文件)", "批准的变更请求", "可交付成果", "工作绩效数据", "组织过程资产"], "tools": ["数据收集(核对单、核查表、统计抽样)", "数据分析(绩效审查)", "检查", "测试/产品评估", "数据表现(因果图、控制图、直方图、散点图)"], "outputs": ["质量控制测量结果", "核实的可交付成果", "工作绩效信息", "变更请求", "项目管理计划更新(质量管理计划)", "项目文件更新(问题日志、经验教训登记册、风险登记册、测试与评估文件)"]},
            {"knowledge_area": "项目资源管理", "process_group": "规划", "process": "规划资源管理", "inputs": ["项目章程", "项目管理计划(质量管理计划、范围基准、进度基准、成本基准)", "项目文件(项目进度计划、需求文件、风险登记册、相关方登记册)", "事业环境因素", "组织过程资产"], "tools": ["专家判断", "数据收集(头脑风暴、核对单)", "数据分析(备选方案分析)", "组织结构图和职位描述(层级型、矩阵型、文本型)", "数据表现(责任分配矩阵)", "会议"], "outputs": ["资源管理计划", "团队章程", "项目文件更新(假设日志、风险登记册)"]},
            {"knowledge_area": "项目资源管理", "process_group": "规划", "process": "估算活动资源", "inputs": ["项目管理计划(资源管理计划、范围基准)", "项目文件(活动清单、活动属性、活动成本估算、里程碑清单、项目进度计划、资源日历、风险登记册)", "事业环境因素", "组织过程资产"], "tools": ["专家判断", "自下而上估算", "类比估算", "参数估算", "数据分析(备选方案分析)", "项目管理信息系统", "会议"], "outputs": ["资源需求", "估算依据", "资源分解结构", "项目文件更新(活动属性、假设日志、经验教训登记册)"]},
            {"knowledge_area": "项目资源管理", "process_group": "执行", "process": "获取资源", "inputs": ["项目管理计划(资源管理计划)", "项目文件(项目进度计划、资源日历、资源需求、风险登记册、相关方登记册)", "事业环境因素", "组织过程资产"], "tools": ["决策(多标准决策分析)", "人际关系与团队技能(谈判)", "预分派", "虚拟团队"], "outputs": ["实物资源分配单", "项目团队派工单", "资源日历更新", "变更请求", "项目管理计划更新(资源管理计划)", "项目文件更新(经验教训登记册、项目进度计划、资源分解结构、资源需求、风险登记册、相关方登记册)"]},
            {"knowledge_area": "项目资源管理", "process_group": "执行", "process": "建设团队", "inputs": ["项目管理计划(资源管理计划)", "项目文件(项目团队派工单、资源日历、团队章程)", "事业环境因素", "组织过程资产"], "tools": ["集中办公", "虚拟团队", "沟通技术", "人际关系与团队技能(冲突管理、影响力、激励、谈判、团队建设)", "认可与奖励", "培训", "个人和团队评估(360度反馈、评估矩阵、性格测试)", "会议"], "outputs": ["团队绩效评价", "变更请求", "项目管理计划更新(资源管理计划)", "项目文件更新(经验教训登记册、项目进度计划、项目团队派工单、资源日历、团队章程)"]},
            {"knowledge_area": "项目资源管理", "process_group": "执行", "process": "管理团队", "inputs": ["项目管理计划(资源管理计划)", "项目文件(问题日志、经验教训登记册、项目团队派工单、团队章程、工作绩效报告)", "工作绩效数据", "团队绩效评价", "事业环境因素", "组织过程资产"], "tools": ["人际关系与团队技能(冲突管理、决策、情商、影响力、领导力)", "项目管理信息系统"], "outputs": ["变更请求", "项目管理计划更新(资源管理计划、进度基准、成本基准)", "项目文件更新(问题日志、经验教训登记册、项目团队派工单、风险登记册、相关方登记册)", "事业环境因素更新", "组织过程资产更新"]},
            {"knowledge_area": "项目资源管理", "process_group": "监控", "process": "控制资源", "inputs": ["项目管理计划(资源管理计划)", "项目文件(问题日志、实物资源分配单、项目进度计划、资源分解结构、资源需求、风险登记册)", "工作绩效数据", "协议", "组织过程资产"], "tools": ["数据分析(备选方案分析、成本效益分析、绩效审查、趋势分析)", "问题解决", "人际关系与团队技能(谈判、影响力)", "项目管理信息系统"], "outputs": ["工作绩效信息", "变更请求", "项目管理计划更新(资源管理计划、进度基准、成本基准)", "项目文件更新(问题日志、经验教训登记册、实物资源分配单、资源分解结构、资源需求、风险登记册)"]},
            {"knowledge_area": "项目沟通管理", "process_group": "规划", "process": "规划沟通管理", "inputs": ["项目章程", "项目管理计划(资源管理计划、相关方参与计划)", "项目文件(需求文件、相关方登记册)", "事业环境因素", "组织过程资产"], "tools": ["专家判断", "沟通需求分析", "沟通技术", "数据表现(沟通模型、沟通矩阵)", "会议"], "outputs": ["沟通管理计划", "项目管理计划更新(相关方参与计划)", "项目文件更新(相关方登记册)"]},
            {"knowledge_area": "项目沟通管理", "process_group": "执行", "process": "管理沟通", "inputs": ["项目管理计划(沟通管理计划)", "项目文件(变更日志、问题日志、经验教训登记册、质量报告、风险报告、相关方登记册)", "工作绩效数据", "事业环境因素", "组织过程资产"], "tools": ["沟通技术", "沟通方法(互动沟通、推式沟通、拉式沟通)", "人际关系与团队技能(积极倾听、冲突管理、文化意识、演示、领导力、会议管理、网络、人际交往、政治意识)", "项目管理信息系统"], "outputs": ["项目沟通记录", "项目管理计划更新(沟通管理计划、相关方参与计划)", "项目文件更新(问题日志、经验教训登记册、相关方登记册)", "组织过程资产更新"]},
            {"knowledge_area": "项目沟通管理", "process_group": "监控", "process": "监督沟通", "inputs": ["项目管理计划(沟通管理计划)", "项目文件(问题日志、经验教训登记册、项目沟通记录、相关方登记册)", "工作绩效数据", "事业环境因素", "组织过程资产"], "tools": ["专家判断", "数据分析(备选方案分析、根本原因分析、趋势分析)", "观察和交谈", "人际关系与团队技能(积极倾听、文化意识、领导力、人际交往、政治意识)", "项目管理信息系统"], "outputs": ["工作绩效信息", "变更请求", "项目管理计划更新(沟通管理计划、相关方参与计划)", "项目文件更新(问题日志、经验教训登记册、相关方登记册)"]},
            {"knowledge_area": "项目风险管理", "process_group": "规划", "process": "规划风险管理", "inputs": ["项目章程", "项目管理计划(进度管理计划、成本管理计划、质量管理计划、资源管理计划、相关方参与计划)", "项目文件(相关方登记册)", "事业环境因素", "组织过程资产"], "tools": ["专家判断", "数据分析(相关方分析)", "会议"], "outputs": ["风险管理计划"]},
            {"knowledge_area": "项目风险管理", "process_group": "规划", "process": "识别风险", "inputs": ["项目管理计划(风险管理计划、范围基准、进度基准、成本基准、质量管理计划、资源管理计划、相关方参与计划)", "项目文件(假设日志、成本估算、持续时间估算、问题日志、经验教训登记册、需求文件、资源需求、相关方登记册)", "协议", "事业环境因素", "组织过程资产"], "tools": ["专家判断", "数据收集(头脑风暴、核对单分析、访谈)", "数据分析(根本原因分析、假设条件和制约因素分析、SWOT分析、文件分析)", "人际关系与团队技能(引导)", "提示清单", "会议"], "outputs": ["风险登记册", "风险报告", "项目文件更新(假设日志、问题日志、经验教训登记册、需求文件)"]},
            {"knowledge_area": "项目风险管理", "process_group": "规划", "process": "实施定性风险分析", "inputs": ["项目管理计划(风险管理计划)", "项目文件(假设日志、风险登记册、相关方登记册)", "事业环境因素", "组织过程资产"], "tools": ["专家判断", "数据收集(访谈)", "数据分析(风险数据质量评估、风险概率和影响评估、风险分类、风险紧迫性评估)", "人际关系与团队技能(引导)", "风险分类", "数据表现(概率和影响矩阵、层级图)"], "outputs": ["项目文件更新(假设日志、问题日志、风险登记册、风险报告)"]},
            {"knowledge_area": "项目风险管理", "process_group": "规划", "process": "实施定量风险分析", "inputs": ["项目管理计划(风险管理计划、范围基准、进度基准、成本基准)", "项目文件(假设日志、估算依据、成本估算、持续时间估算、资源需求、风险登记册、风险报告、进度计划)", "事业环境因素", "组织过程资产"], "tools": ["专家判断", "数据收集(访谈)", "人际关系与团队技能(引导)", "不确定性表现方式", "数据分析(模拟、敏感性分析、决策树分析、影响图)"], "outputs": ["项目文件更新(风险登记册、风险报告)"]},
            {"knowledge_area": "项目风险管理", "process_group": "规划", "process": "规划风险应对", "inputs": ["项目管理计划(风险管理计划、资源管理计划、成本基准、进度基准)", "项目文件(风险登记册、风险报告、相关方登记册)", "事业环境因素", "组织过程资产"], "tools": ["专家判断", "数据收集(访谈)", "人际关系与团队技能(引导)", "威胁应对策略(上报、规避、转移、减轻、接受)", "机会应对策略(上报、开拓、分享、提高、接受)", "应急应对策略", "整体项目风险应对策略", "决策(多标准决策分析)"], "outputs": ["变更请求", "项目管理计划更新(进度管理计划、成本管理计划、质量管理计划、资源管理计划、采购管理计划、范围基准、进度基准、成本基准)", "项目文件更新(假设日志、成本估算、经验教训登记册、项目进度计划、资源需求、风险登记册、风险报告、相关方登记册)"]},
            {"knowledge_area": "项目风险管理", "process_group": "执行", "process": "实施风险应对", "inputs": ["项目管理计划(风险管理计划)", "项目文件(风险登记册、风险报告)", "批准的变更请求", "工作绩效数据", "组织过程资产"], "tools": ["专家判断", "人际关系与团队技能(影响力、谈判、项目管理)", "项目管理信息系统"], "outputs": ["变更请求", "项目文件更新(问题日志、经验教训登记册、项目团队派工单、风险登记册、风险报告)"], "工作绩效信息": ["工作绩效信息"]},
            {"knowledge_area": "项目风险管理", "process_group": "监控", "process": "监督风险", "inputs": ["项目管理计划(风险管理计划)", "项目文件(风险登记册、风险报告、经验教训登记册)", "工作绩效数据", "工作绩效报告", "组织过程资产"], "tools": ["数据分析(技术绩效分析、储备分析)", "风险审查会", "审计", "会议"], "outputs": ["工作绩效信息", "变更请求", "项目管理计划更新(风险管理计划)", "项目文件更新(假设日志、问题日志、经验教训登记册、风险登记册、风险报告)"], "组织过程资产更新": ["组织过程资产更新"]},
            {"knowledge_area": "项目采购管理", "process_group": "规划", "process": "规划采购管理", "inputs": ["项目章程", "项目管理计划(范围管理计划、质量管理计划、资源管理计划、范围基准、进度基准、成本基准)", "项目文件(需求文件、风险登记册、相关方登记册)", "事业环境因素", "组织过程资产"], "tools": ["专家判断", "数据收集(市场调研)", "数据分析(自制或外购分析、专家判断)", "来源选择分析", "会议"], "outputs": ["采购管理计划", "采购策略", "招标文件(投标邀请书、建议书邀请书、报价邀请书、磋商邀请书、信息邀请书)", "采购工作说明书", "供方选择标准", "自制或外购决策", "独立成本估算", "变更请求", "项目文件更新(经验教训登记册、里程碑清单、需求文件、需求跟踪矩阵、风险登记册、相关方登记册)"]},
            {"knowledge_area": "项目采购管理", "process_group": "执行", "process": "实施采购", "inputs": ["项目管理计划(采购管理计划、范围基准)", "项目文件(采购文件、供方选择标准、独立成本估算、风险登记册、相关方登记册)", "采购文档", "卖方建议书", "事业环境因素", "组织过程资产"], "tools": ["投标人会议", "数据分析(建议书评估)", "人际关系与团队技能(谈判)", "广告", "因特网搜索", "采购谈判"], "outputs": ["选定的卖方", "协议", "变更请求", "项目管理计划更新(需求管理计划、质量管理计划、资源管理计划、沟通管理计划、风险管"], "项目文件更新": ["项目文件更新(经验教训登记册、需求文件、需求跟踪矩阵、风险登记册、相关方登记册)"]},
            {"knowledge_area": "项目采购管理", "process_group": "监控", "process": "控制采购", "inputs": ["项目管理计划(采购管理计划)", "项目文件(需求文件、需求跟踪矩阵、采购文档)", "协议", "批准的变更请求", "工作绩效数据", "组织过程资产"], "tools": ["专家判断", "索赔管理", "数据分析(绩效审查、挣值分析、趋势分析)", "检查", "审计", "采购谈判"], "outputs": ["关闭的采购", "工作绩效信息", "采购文档更新", "变更请求", "项目管理计划更新(采购管理计划、进度基准、成本基准)", "项目文件更新(经验教训登记册、资源需求、需求跟踪矩阵、风险登记册、相关方登记册)"]},
            {"knowledge_area": "项目相关方管理", "process_group": "规划", "process": "识别相关方", "inputs": ["项目章程", "商业文件(商业论证、效益管理计划)", "项目管理计划(沟通管理计划、相关方参与计划)", "项目文件(变更日志、问题日志、需求文件)", "协议", "事业环境因素", "组织过程资产"], "tools": ["专家判断", "数据收集(问卷调查、头脑风暴)", "数据分析(相关方分析、文档分析)", "数据表现(相关方映射/分类)", "会议"], "outputs": ["相关方登记册", "变更请求", "项目文件更新(假设日志、问题日志)"]},
            {"knowledge_area": "项目相关方管理", "process_group": "规划", "process": "规划相关方参与", "inputs": ["项目章程", "项目管理计划(资源管理计划、沟通管理计划)", "项目文件(假设日志、变更日志、问题日志、项目进度计划、风险登记册、相关方登记册)", "协议", "事业环境因素", "组织过程资产"], "tools": ["专家判断", "数据收集(标杆对照、问卷调查)", "数据分析(假设条件和制约因素分析、根本原因分析、相关方分析)", "决策(多标准决策分析)", "数据表现(思维导图、相关方参与度评估矩阵)", "会议"], "outputs": ["相关方参与计划", "变更请求", "项目文件更新(沟通管理计划、风险登记册)"]},
            {"knowledge_area": "项目相关方管理", "process_group": "执行", "process": "管理相关方参与", "inputs": ["项目管理计划(沟通管理计划、相关方参与计划)", "项目文件(变更日志、问题日志、经验教训登记册、相关方登记册)", "事业环境因素", "组织过程资产"], "tools": ["沟通技能(反馈、演示)", "人际关系与团队技能(冲突管理、文化意识、谈判、观察和交谈、政治意识)", "管理技能(展示领导力、激励、指导、谈判、影响)", "会议"], "outputs": ["变更请求", "项目管理计划更新(沟通管理计划、相关方参与计划)", "项目文件更新(变更日志、问题日志、经验教训登记册、相关方登记册)"], "组织过程资产更新": ["组织过程资产更新"]},
            {"knowledge_area": "项目相关方管理", "process_group": "监控", "process": "监督相关方参与", "inputs": ["项目管理计划(相关方参与计划)", "项目文件(问题日志、经验教训登记册、项目沟通记录、风险登记册、相关方登记册)", "工作绩效数据", "工作绩效报告", "组织过程资产"], "tools": ["数据分析(备选方案分析、根本原因分析、趋势分析)", "决策(多标准决策分析)", "数据表现(相关方参与度评估矩阵)", "会议"], "outputs": ["工作绩效信息", "变更请求", "项目管理计划更新(沟通管理计划、相关方参与计划)", "项目文件更新(问题日志、经验教训登记册、风险登记册、相关方登记册)"]}
        ];

        // 统计数据
        const statistics = {
            total_processes: 49,
            total_inputs: 239,
            total_tools: 248,
            total_outputs: 183
        };

        // 知识领域分布
        const knowledgeAreas = {
            "项目整合管理": 7,
            "项目范围管理": 6,
            "项目进度管理": 6,
            "项目成本管理": 4,
            "项目质量管理": 3,
            "项目资源管理": 6,
            "项目沟通管理": 3,
            "项目风险管理": 7,
            "项目采购管理": 3,
            "项目相关方管理": 4
        };

        // 过程组分布
        const processGroups = {
            "启动": 2,
            "规划": 24,
            "执行": 10,
            "监控": 12,
            "收尾": 1
        };
    </script>
    
    <style>
        /* 自定义样式 */
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
        }
        
        @media (max-width: 768px) {
            .chart-container {
                height: 250px;
            }
        }
        
        @media (max-width: 480px) {
            .chart-container {
                height: 200px;
            }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <!-- 顶部导航 -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <i class="fas fa-project-diagram text-blue-600 text-2xl"></i>
                    <h1 class="text-xl font-bold text-gray-800">高项ITTO结构</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <span class="text-sm text-gray-600 hidden md:inline-block">
                        <i class="fas fa-database mr-1"></i>
                        <span id="totalProcesses">49</span>个过程
                    </span>
                    <button id="themeToggle" class="p-2 rounded-full hover:bg-gray-100">
                        <i class="fas fa-moon text-gray-600"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- 主要内容 -->
    <main class="container mx-auto px-4 py-6">
        <!-- 统计概览 -->
        <section class="mb-8">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="bg-white rounded-xl shadow-md p-4 card-hover">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-600">总过程数</p>
                            <p class="text-2xl font-bold text-blue-600" id="statProcesses">49</p>
                        </div>
                        <i class="fas fa-sitemap text-blue-500 text-xl"></i>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-md p-4 card-hover">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-600">输入</p>
                            <p class="text-2xl font-bold text-green-600" id="statInputs">239</p>
                        </div>
                        <i class="fas fa-arrow-right text-green-500 text-xl"></i>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-md p-4 card-hover">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-600">工具技术</p>
                            <p class="text-2xl font-bold text-purple-600" id="statTools">248</p>
                        </div>
                        <i class="fas fa-wrench text-purple-500 text-xl"></i>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-md p-4 card-hover">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-600">输出</p>
                            <p class="text-2xl font-bold text-orange-600" id="statOutputs">183</p>
                        </div>
                        <i class="fas fa-arrow-left text-orange-500 text-xl"></i>
                    </div>
                </div>
            </div>
        </section>

        <!-- 图表分析 -->
        <section class="mb-8">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- 知识领域分布 -->
                <div class="bg-white rounded-xl shadow-md p-6">
                    <h2 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-chart-pie text-blue-600 mr-2"></i>
                        知识领域分布
                    </h2>
                    <div class="chart-container">
                        <canvas id="knowledgeAreaChart"></canvas>
                    </div>
                </div>

                <!-- 过程组分布 -->
                <div class="bg-white rounded-xl shadow-md p-6">
                    <h2 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-chart-bar text-green-600 mr-2"></i>
                        过程组分布
                    </h2>
                    <div class="chart-container">
                        <canvas id="processGroupChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- 筛选和搜索 -->
        <section class="mb-8">
            <div class="bg-white rounded-xl shadow-md p-6">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                    <div>
                        <label for="knowledgeAreaSelect" class="block text-sm font-medium text-gray-700 mb-1">知识领域</label>
                        <select id="knowledgeAreaSelect" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="">全部</option>
                        </select>
                    </div>
                    <div>
                        <label for="processGroupSelect" class="block text-sm font-medium text-gray-700 mb-1">过程组</label>
                        <select id="processGroupSelect" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="">全部</option>
                        </select>
                    </div>
                    <div>
                        <label for="searchInput" class="block text-sm font-medium text-gray-700 mb-1">搜索过程</label>
                        <div class="relative">
                            <input type="text" id="searchInput" placeholder="输入关键词..." 
                                class="w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 过程列表 -->
        <section class="mb-8">
            <div class="bg-white rounded-xl shadow-md p-6">
                <h2 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                    <i class="fas fa-list text-purple-600 mr-2"></i>
                    项目管理过程列表
                    <span class="ml-2 text-sm text-gray-500" id="processCount">(49个)</span>
                </h2>
                <div id="processList" class="space-y-4">
                    <!-- 过程卡片将通过JavaScript动态生成 -->
                </div>
            </div>
        </section>

        <!-- ITTO详情模态框 -->
        <div id="ittoModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center">
            <div class="bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto m-4">
                <div class="p-6 border-b">
                    <div class="flex justify-between items-center">
                        <h3 class="text-xl font-bold text-gray-800" id="modalTitle">ITTO详情</h3>
                        <button id="closeModal" class="text-gray-500 hover:text-gray-700">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                    <div class="mt-2 flex flex-wrap gap-2">
                        <span id="modalKnowledgeArea" class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm"></span>
                        <span id="modalProcessGroup" class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm"></span>
                    </div>
                </div>
                <div class="p-6">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <!-- 输入 -->
                        <div class="bg-blue-50 rounded-lg p-4">
                            <h4 class="font-semibold text-blue-800 mb-3 flex items-center">
                                <i class="fas fa-arrow-right mr-2"></i>
                                输入
                                <span class="ml-2 text-sm font-normal" id="inputCount">(0个)</span>
                            </h4>
                            <ul id="inputList" class="space-y-2 text-sm text-gray-700">
                                <!-- 输入项将通过JavaScript动态生成 -->
                            </ul>
                        </div>
                        
                        <!-- 工具技术 -->
                        <div class="bg-purple-50 rounded-lg p-4">
                            <h4 class="font-semibold text-purple-800 mb-3 flex items-center">
                                <i class="fas fa-wrench mr-2"></i>
                                工具技术
                                <span class="ml-2 text-sm font-normal" id="toolCount">(0个)</span>
                            </h4>
                            <ul id="toolList" class="space-y-2 text-sm text-gray-700">
                                <!-- 工具技术项将通过JavaScript动态生成 -->
                            </ul>
                        </div>
                        
                        <!-- 输出 -->
                        <div class="bg-orange-50 rounded-lg p-4">
                            <h4 class="font-semibold text-orange-800 mb-3 flex items-center">
                                <i class="fas fa-arrow-left mr-2"></i>
                                输出
                                <span class="ml-2 text-sm font-normal" id="outputCount">(0个)</span>
                            </h4>
                            <ul id="outputList" class="space-y-2 text-sm text-gray-700">
                                <!-- 输出项将通过JavaScript动态生成 -->
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="p-4 border-t flex justify-end">
                    <button id="closeModalBtn" class="px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg text-gray-800">
                        关闭
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- 页脚 -->
    <footer class="bg-white shadow-inner py-6">
        <div class="container mx-auto px-4 text-center text-gray-600">
            <p>&copy; 2024 高项ITTO结构可视化 | 基于PMBOK指南</p>
        </div>
    </footer>

    <script>
        // 初始化页面
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化统计数据
            document.getElementById('statProcesses').textContent = statistics.total_processes;
            document.getElementById('statInputs').textContent = statistics.total_inputs;
            document.getElementById('statTools').textContent = statistics.total_tools;
            document.getElementById('statOutputs').textContent = statistics.total_outputs;
            document.getElementById('totalProcesses').textContent = statistics.total_processes;
            document.getElementById('processCount').textContent = `(${statistics.total_processes}个)`;

            // 填充下拉菜单
            populateDropdowns();
            
            // 生成过程列表
            generateProcessList(ittoData);
            
            // 初始化图表
            initCharts();
            
            // 添加事件监听器
            addEventListeners();
        });

        // 填充下拉菜单
        function populateDropdowns() {
            const knowledgeAreaSelect = document.getElementById('knowledgeAreaSelect');
            const processGroupSelect = document.getElementById('processGroupSelect');

            // 知识领域下拉菜单
            Object.keys(knowledgeAreas).forEach(area => {
                const option = document.createElement('option');
                option.value = area;
                option.textContent = area;
                knowledgeAreaSelect.appendChild(option);
            });

            // 过程组下拉菜单
            Object.keys(processGroups).forEach(group => {
                const option = document.createElement('option');
                option.value = group;
                option.textContent = group;
                processGroupSelect.appendChild(option);
            });
        }

        // 生成过程列表
        function generateProcessList(processes) {
            const processList = document.getElementById('processList');
            processList.innerHTML = '';

            if (processes.length === 0) {
                processList.innerHTML = `
                    <div class="text-center py-8 text-gray-500">
                        <i class="fas fa-search text-3xl mb-2"></i>
                        <p>没有找到匹配的过程</p>
                    </div>
                `;
                return;
            }

            processes.forEach((process, index) => {
                const card = document.createElement('div');
                card.className = 'border border-gray-200 rounded-lg p-4 card-hover fade-in';
                card.style.animationDelay = `${index * 0.05}s`;
                
                card.innerHTML = `
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="font-semibold text-gray-800 mb-1">${process.process}</h3>
                            <div class="flex flex-wrap gap-2 mb-3">
                                <span class="px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs">${process.knowledge_area}</span>
                                <span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs">${process.process_group}</span>
                            </div>
                        </div>
                        <div class="flex space-x-2">
                            <span class="inline-flex items-center px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs">
                                <i class="fas fa-arrow-right mr-1"></i>${process.inputs ? process.inputs.length : 0}
                            </span>
                            <span class="inline-flex items-center px-2 py-1 bg-purple-50 text-purple-700 rounded text-xs">
                                <i class="fas fa-wrench mr-1"></i>${process.tools ? process.tools.length : 0}
                            </span>
                            <span class="inline-flex items-center px-2 py-1 bg-orange-50 text-orange-700 rounded text-xs">
                                <i class="fas fa-arrow-left mr-1"></i>${process.outputs ? process.outputs.length : 0}
                            </span>
                        </div>
                    </div>
                    <button class="view-details w-full mt-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors" 
                            data-index="${index}">
                        查看详情
                    </button>
                `;
                
                processList.appendChild(card);
            });

            // 添加详情按钮事件
            document.querySelectorAll('.view-details').forEach(button => {
                button.addEventListener('click', function() {
                    const index = parseInt(this.getAttribute('data-index'));
                    showITTODetails(ittoData[index]);
                });
            });
        }

        // 显示ITTO详情
        function showITTODetails(process) {
            document.getElementById('modalTitle').textContent = process.process;
            document.getElementById('modalKnowledgeArea').textContent = process.knowledge_area;
            document.getElementById('modalProcessGroup').textContent = process.process_group;
            
            // 显示输入
            const inputList = document.getElementById('inputList');
            inputList.innerHTML = '';
            const inputs = process.inputs || [];
            inputs.forEach(input => {
                const li = document.createElement('li');
                li.className = 'flex items-start';
                li.innerHTML = `<i class="fas fa-circle text-xs text-blue-500 mt-1.5 mr-2"></i>${input}`;
                inputList.appendChild(li);
            });
            document.getElementById('inputCount').textContent = `(${inputs.length}个)`;
            
            // 显示工具技术
            const toolList = document.getElementById('toolList');
            toolList.innerHTML = '';
            const tools = process.tools || [];
            tools.forEach(tool => {
                const li = document.createElement('li');
                li.className = 'flex items-start';
                li.innerHTML = `<i class="fas fa-circle text-xs text-purple-500 mt-1.5 mr-2"></i>${tool}`;
                toolList.appendChild(li);
            });
            document.getElementById('toolCount').textContent = `(${tools.length}个)`;
            
            // 显示输出
            const outputList = document.getElementById('outputList');
            outputList.innerHTML = '';
            const outputs = process.outputs || [];
            outputs.forEach(output => {
                const li = document.createElement('li');
                li.className = 'flex items-start';
                li.innerHTML = `<i class="fas fa-circle text-xs text-orange-500 mt-1.5 mr-2"></i>${output}`;
                outputList.appendChild(li);
            });
            document.getElementById('outputCount').textContent = `(${outputs.length}个)`;
            
            // 显示模态框
            document.getElementById('ittoModal').classList.remove('hidden');
        }

        // 初始化图表
        function initCharts() {
            // 知识领域分布饼图
            const knowledgeAreaCtx = document.getElementById('knowledgeAreaChart').getContext('2d');
            new Chart(knowledgeAreaCtx, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(knowledgeAreas),
                    datasets: [{
                        data: Object.values(knowledgeAreas),
                        backgroundColor: [
                            '#3B82F6', '#10B981', '#8B5CF6', '#F59E0B', '#EF4444',
                            '#06B6D4', '#84CC16', '#F97316', '#EC4899', '#6366F1'
                        ],
                        borderWidth: 2,
                        borderColor: '#ffffff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 15,
                                usePointStyle: true,
                                font: {
                                    size: 11
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = ((context.parsed / total) * 100).toFixed(1);
                                    return `${context.label}: ${context.parsed}个 (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });

            // 过程组分布柱状图
            const processGroupCtx = document.getElementById('processGroupChart').getContext('2d');
            new Chart(processGroupCtx, {
                type: 'bar',
                data: {
                    labels: Object.keys(processGroups),
                    datasets: [{
                        label: '过程数量',
                        data: Object.values(processGroups),
                        backgroundColor: [
                            '#10B981', '#3B82F6', '#F59E0B', '#EF4444', '#8B5CF6'
                        ],
                        borderColor: [
                            '#059669', '#2563EB', '#D97706', '#DC2626', '#7C3AED'
                        ],
                        borderWidth: 1,
                        borderRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.label}: ${context.parsed.y}个过程`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                stepSize: 1
                            },
                            grid: {
                                color: '#F3F4F6'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
        }

        // 添加事件监听器
        function addEventListeners() {
            // 筛选事件
            document.getElementById('knowledgeAreaSelect').addEventListener('change', filterProcesses);
            document.getElementById('processGroupSelect').addEventListener('change', filterProcesses);
            document.getElementById('searchInput').addEventListener('input', filterProcesses);

            // 模态框关闭事件
            document.getElementById('closeModal').addEventListener('click', function() {
                document.getElementById('ittoModal').classList.add('hidden');
            });
            document.getElementById('closeModalBtn').addEventListener('click', function() {
                document.getElementById('ittoModal').classList.add('hidden');
            });

            // 点击模态框外部关闭
            document.getElementById('ittoModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.add('hidden');
                }
            });

            // 主题切换
            document.getElementById('themeToggle').addEventListener('click', toggleTheme);
        }

        // 筛选过程
        function filterProcesses() {
            const knowledgeArea = document.getElementById('knowledgeAreaSelect').value;
            const processGroup = document.getElementById('processGroupSelect').value;
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();

            const filteredProcesses = ittoData.filter(process => {
                const matchesKnowledgeArea = !knowledgeArea || process.knowledge_area === knowledgeArea;
                const matchesProcessGroup = !processGroup || process.process_group === processGroup;
                const matchesSearch = !searchTerm || 
                    (process.process && process.process.toLowerCase().includes(searchTerm)) ||
                    (process.knowledge_area && process.knowledge_area.toLowerCase().includes(searchTerm)) ||
                    (process.process_group && process.process_group.toLowerCase().includes(searchTerm));

                return matchesKnowledgeArea && matchesProcessGroup && matchesSearch;
            });

            document.getElementById('processCount').textContent = `(${filteredProcesses.length}个)`;
            generateProcessList(filteredProcesses);
        }

        // 主题切换
        function toggleTheme() {
            const body = document.body;
            const themeToggle = document.getElementById('themeToggle');
            const icon = themeToggle.querySelector('i');

            if (body.classList.contains('dark')) {
                body.classList.remove('dark');
                body.classList.add('bg-gradient-to-br', 'from-blue-50', 'to-indigo-100');
                icon.classList.remove('fa-sun');
                icon.classList.add('fa-moon');
            } else {
                body.classList.add('dark');
                body.classList.remove('bg-gradient-to-br', 'from-blue-50', 'to-indigo-100');
                body.classList.add('bg-gray-900');
                icon.classList.remove('fa-moon');
                icon.classList.add('fa-sun');
            }
        }
    </script>
</body>
</html>